/*! marionette.dialogs - v0.6.6
 *  Release on: 2015-02-09
 *  Copyright (c) 2015 St√©phane Bachelier
 *  Licensed MIT */
define(["marionette"],function(a){"use strict";var b={types:{},custom:{}},c=a.ItemView.extend({initialize:function(){this.options=this.options||{},this.config=this.options&&this.options.config?this.options.config:{},this.options&&this.options.template&&(this.template=this.options.template)},serializeData:function(){return this.config},dismiss:function(a){a&&a.stopImmediatePropagation(),this.triggerMethod("dismiss")},onDismiss:function(){this.destroy()}});b.types.dialog=c;var d=c.extend({className:"dialog dialog--alert",ui:{button:".alert--button"},events:{"click @ui.button":"dismiss"}});b.types.alert=d;var e=c.extend({className:"dialog dialog--confirm",ui:{ok:".confirm--ok--button",nok:".confirm--nok--button"},events:{"click @ui.ok":"confirm","click @ui.nok":"reject"},confirm:function(){this.triggerMethod("confirm"),this.dismiss()},reject:function(){this.triggerMethod("reject"),this.dismiss()}});b.types.confirm=e;var f=c.extend({className:"dialog dialog--notification",events:{click:"dismiss"},onRender:function(){this.config&&this.config.timeout&&this.runTimer(this.config.timeout)},runTimer:function(a){var b=this;setTimeout(function(){b.dismiss()},a)}});b.types.notification=f;var g=f.extend({className:"dialog dialog--toast"});b.types.toast=g;var h=c.extend({className:"dialog dialog--waiting"});b.types.waiting=h;var i=c.extend({className:"dialog dialog--splash",ui:{buttons:".splash--button"},events:{"click @ui.buttons":"onClicked"},onClicked:function(){this.dismiss()}});b.types.splash=i,b.get=function(a){return b.types[a]||b.custom[a]||null},b.register=function(a,c){b.custom[a]=c};var j=function(a,b){this.dialogs=a,this.options=b||{},this.config=b.config||{}};return j.prototype.createDialog=function(a){var b=a||{},c=this.dialogs.get(a.name)||this.dialogs.get(a.type);return a.config&&a.config.className&&(b.className=c.prototype.className+" "+a.config.className),new c(b)},j.prototype.buildConfiguration=function(a){var b={};return this.config.dialogs[a.type]&&(b=this.config.dialogs[a.type]),_.extend(b,this.config.dialogs[a.name],a)},j.prototype.create=function(a){if(!a)return void this.log("no options given");var b;if("[object Object]"===a.toString())b=this.buildConfiguration(a);else{var c=this.config.dialogs[a];if(!c)return void this.log("no configuration found for the given options");b=this.buildConfiguration(c)}return b?this.createDialog(b):void this.log("configuration not found")},j.prototype.render=function(a,b,c){if(a){var d=this.create(b);return d?(a.show(d,c),d):(this.log("Failed to create dialog from given options"),!1)}},j.prototype.log=function(a){console.warn("[dialogs:factory]",a)},b.Factory=j,a.dialogs=b,b});